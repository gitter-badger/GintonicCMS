define(["require","reactDev","chat/messages","chat/heading","chat/compose"],function(e){var t=e("reactDev"),n=e("chat/messages"),r=e("chat/heading"),i=e("chat/compose"),s=t.createClass({displayName:"ChatBox",getInitialState:function(){return{data:{messages:[]}}},componentDidMount:function(){this.retrieveMessages(),setInterval(this.retrieveMessages,this.props.pollInterval)},handleSubmit:function(e){this.state.data.messages.push({body:e,user:{email:"test@blackhole.io"}}),this.setState({data:this.state.data})},retrieveMessages:function(){$.ajax({url:this.props.url,dataType:"json",cache:!1,success:function(e){this.setState({data:e.threads[0]})}.bind(this),error:function(e,t,n){console.error(this.props.url,t,n.toString())}.bind(this)})},render:function(){return t.createElement("div",{id:"accordion",className:"panel panel-default"},t.createElement(r,null),t.createElement("div",{className:"panel-collapse collapse in",id:"collapseOne"},t.createElement("div",{className:"panel-body"},t.createElement(n,{data:this.state.data.messages})),t.createElement(i,{handleSubmit:this.handleSubmit})))}});return s});